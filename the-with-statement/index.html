<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <title>Bite Sized Python Tips | The with statement</title>
  <meta property="og:type" content="article" />
  <link rel="alternate" type="application/rss+xml" title="Bite Sized Python Tips » Feed" href="http://yasoob.github.io/blog/feeds/all.atom.xml">
  <meta property="article:publisher" content="https://www.facebook.com/freepythontips">
  <meta property="article:author" content="https://www.facebook.com/profile.php?id=1530901081">
  <meta property="og:image" content="http://0.gravatar.com/blavatar/6c1d474724ac198295b95c49642a34b3?s=200">
  <meta name="twitter:site" content="@yasoobkhalid">
  <meta name="description" content="So the chances are that you already know about the with statement but some of us do not know about it. Lets face the reality the with statement saves us a lot of time and reduces our code base. Just imagine you are opening a file width python and then ..." />
    <meta property="article:tag" content="python" />
    <meta property="article:tag" content="with" />
    <meta property="article:tag" content="with statement" />
    <link rel="stylesheet" href="http://yasoob.github.io/blog/theme/css/main.css" />
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Raleway:400,200" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="http://yasoob.github.io/blog/images/favicon.ico">
    <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body id="index" class="home">
<a href="http://www.github.com/yasoob/blog">
<img style="position: absolute; top: 0; left: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_left_white_ffffff.png" alt="Fork me on GitHub" />
</a>

<!-- AddThis Smart Layers BEGIN -->
<!-- Go to http://www.addthis.com/get/smart-layers to customize -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-529a3f497b3e7850"></script>
<script type="text/javascript">
  addthis.layers({
    'theme' : 'transparent', 
    'follow' : {
      'services' : [
        {'service': 'facebook', 'id': 'freepythontips'},
        {'service': 'twitter', 'id': 'yasoobkhalid'},
        {'service': 'rss', 'id': 'http://feedpress.me/pytips'}
      ]
    }   
  });
</script>
<!-- AddThis Smart Layers END -->    <div id="wrapper">
        <header id="banner" class="body">
            <div>
                <img src="http://yasoob.github.io/blog/images/logo.png">
            </div>
            <h1><a href="http://yasoob.github.io/blog/">Bite Sized Python Tips</a></h1>
            <br/><nav><ul>
                <li>|<a href="http://yasoob.github.io/blog/about">About</a>|</li> 
                <li>|<a href="http://yasoob.github.io/blog/pycrumbs">Beginner's Delight</a>|</li> 
                <li>|<a href="http://yasoob.github.io/blog/python-news">News</a>|</li> 
            </ul></nav>
        </header>
        <hr>
<section id="content" class="body">
  <article class="container">
    <header>
      <h1 class="entry-title">The with statement</h1>
      <span class="date">July 28, 2013</span>
    </header>

    <div class="entry-content">
      <p>So the chances are that you already know about the with statement but
some of us do not know about it. Lets face the reality the with
statement saves us a lot of time and reduces our code base. Just
imagine<!--more--> you are opening a file width python and then saving
something to it. You would normally do :</p>
<div class="codehilite"><pre><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;file.txt&#39;</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="n">file</span><span class="o">.</span><span class="nb">write</span><span class="p">(</span><span class="s">&quot;freepythontips.wordpress.com&quot;</span><span class="p">)</span>
<span class="n">file</span><span class="o">.</span><span class="nb">close</span><span class="p">()</span>
</pre></div>


<p>But what if an exception occurs while writing to file ? then the file
won't be closed properly. I know how much trouble it can cause. It once
happened with me that i was running a web scrapper and it was running
for past three hours and then unexpectedly an exception occured and my
whole csv file got corrupted and i had to run the scrapper again. So
lets come to the point. What method can you adopt to prevent such
disaster. Obviously you can not prevent the exception when it is
unexpected but you can take some precautions. Firstly you can wrap up
your code in a try-except clause or better yet you can use a with
statement. Let's first talk about try-except clause. You would normally
do something like this :</p>
<div class="codehilite"><pre><span class="err">try:</span>
    <span class="err">file</span> <span class="err">=</span> <span class="err">open(&#39;file.txt&#39;,&#39;w&#39;)</span>
    <span class="err">file.write(data)</span>
<span class="err">except:</span>
    <span class="cp"># do something in case of an exception</span>
<span class="err">finally:</span>
    <span class="cp"># here comes the trick. The finally clause gets </span>
    <span class="cp"># executed even if an exception occured in try </span>
    <span class="cp"># or except clause. now we can safely close this</span>
    <span class="cp"># file.</span>
    <span class="err">file.close()</span>
</pre></div>


<p>Now lets talk about the with statement. While using a with statement you
would normally do:</p>
<div class="codehilite"><pre><span class="n">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;file.txt&#39;</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="n">as</span> <span class="n">file:</span>
    <span class="n">file</span><span class="o">.</span><span class="nb">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>


<p>Okay so here while using the with statement we do not have to close the
file explicitly. It is automatically closed after the data is written to
the file.</p>
<p>Do share your views about this post below in the comments.</p>
<footer class="post-info">
  <p>Tags: 
    <a href="http://yasoob.github.io/blog/tag/python.html">python</a>
    <a href="http://yasoob.github.io/blog/tag/with.html">with</a>
    <a href="http://yasoob.github.io/blog/tag/with-statement.html">with statement</a>
  </p>

</footer><!-- /.post-info -->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-529a3f497b3e7850"></script>
<!-- AddThis Button END -->    </div>
    <hr>
    <div>
    <a href = "http://github.us3.list-manage1.com/subscribe?u=20b1036063aec6dbf068cc8c0&id=4d261653c5" target="_blank"><img src= "http://yasoob.github.io/blog/images/subscribe.png" /></a>
    </div><hr><!-- /.entry-content -->
    <div class="comments">
      <h2>Comments</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_identifier = "the-with-statement";
        var disqus_url = "http://yasoob.github.io/blog/the-with-statement";
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://freepytips.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>
    <a href="https://plus.google.com/105844092190217759857?rel=author"></a>
  </article>
</section>
        <div class="clear-footer"></div>
    </div>
    <footer id="contentinfo" class="body">
        <div class="social">
            <a href="mailto:yasoob.khld@gmail.com" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-envelope fa-stack-1x dat-icon"></i>
                </span>
            </a>
            <a href="https://github.com/yasoob" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x dat-icon"></i>
                </span>
            </a>
            <a href="https://www.facebook.com/freepythontips" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-facebook fa-stack-1x dat-icon"></i>
                </span>
            </a>
            <a href="https://twitter.com/yasoobkhalid" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-twitter fa-stack-1x dat-icon"></i>
                </span>
            </a>
            <a href="http://feedpress.me/pytips" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-rss fa-stack-1x dat-icon"></i>
                </span>
            </a>
            <!-- <a class="lastfm" href="http://www.last.fm/user/nortantivirus" target="_blank"></a> -->
        </div>
        <p>
            ©2013 Bite Sized Python Tips
            <br/>Built with <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>.
        </p>
    </footer>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-46059954-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>
</html>